{% extends 'base.html' %}

{% block title %}Top Tracks - Matchify{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-12 px-4">
    <div class="bg-gray-800 p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-semibold text-center text-green-400 mb-4">Top Tracks</h2>

        <div class="text-center mb-4">
            <a href="?tracks_range=short_term" class="px-3 py-1 bg-gray-700 rounded text-sm">4 Weeks</a>
            <a href="?tracks_range=medium_term" class="px-3 py-1 bg-gray-700 rounded text-sm">6 Months</a>
            <a href="?tracks_range=long_term" class="px-3 py-1 bg-gray-700 rounded text-sm">All Time</a>
        </div>

        {% if top_tracks and not top_tracks.Error %}
            <ol class="list-decimal list-inside space-y-3 text-gray-200">
                {% for track in top_tracks|slice:":15" %}
                    <li class="flex items-center space-x-3">
                        {% if track.album.images and track.album.images.0.url %}
                            <img src="{{ track.album.images.0.url }}" class="w-12 h-12 rounded object-cover" alt="{{ track.name }}" />
                        {% else %}
                            <div class="w-12 h-12 bg-gray-700 rounded"></div>
                        {% endif %}
                        <div>
                            <div class="font-semibold">{{ track.name }}</div>
                            <div class="text-xs text-gray-400">
                                {% for artist in track.artists %}{{ artist.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ol>
        {% else %}
            <div class="text-gray-400">No top tracks available for this range.</div>
        {% endif %}

        <div class="mt-6 text-center">
            <a href="{% url 'profile' user.username %}" class="text-sm text-green-400">‚Üê Back to profile</a>
        </div>
    </div>
</div>
{% endblock %}
